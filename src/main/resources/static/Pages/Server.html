<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Home - Sikthaugen</title>

    <!-- Bootstrap CSS CDN -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
    <link href="bootstrap/css/bootstrap.min-3.3.7.css" rel="stylesheet">

    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="css/pls_bibliotek.css">
    <script src="jquery/jquery.js"></script>
</head>
<body id="doc">



<!--<div class="wrapper">-->

    <!-- Page Content Holder -->
    <div id="content">

        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand">Home - Server <div id="version"></div></a>

                </div>


                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <!--<li class="nav-item"><a onclick="openDocument('Pages/mainPage.html')">Home</a></li>
                        <li class="nav-item"><a onclick="openDocument('Pages/device.html')">Device</a></li>-->
                        <li class="nav-item">
                            <button class="btn btn-secondary" type="button" onclick="openDocument('Pages/mainPage.html')">Home</button>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-secondary" type="button" onclick="openDocument('Pages/device.html')">Device</button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

            <div class="row">
                <div class="col-lg-12">
                    <h3 class="text-center"> Home - Server</h3>
                </div>
            </div>

        <div class="row my-3">

            <div class="col-sm-4 col-sm-offset-1 panel panel-default">
                <h3 class="text-center"> Platform information</h3>
                <div class="line"></div>
                <div id="server_platformName"></div>
                <h3 class="text-center"> Hardware information</h3>
                <div class="line"></div>
                <div id="serverFan_cpuTempInfo"></div>
                <div id="server_hardwareInfo"></div>
                <div class="line"></div>

            </div>

            <div class="col-sm-4 col-sm-offset-1 panel panel-default">
                <h3 class="text-center"> Cooling fan</h3>
                <div class="line"></div>
                <div id="serverFan_running"></div>
                <div id="serverFan_setpoint"></div>
                <div id="serverFan_cpuTemp"></div>
                <div class="line"></div>
                <form id="serverFan_setpoint_update" class="form-signin" action="" method="">
                    <div id="serverFan_setpoint_update_text"></div>
                    <input id="serverFan_setpoint_update_value" type="text" class="form-control" placeholder="Setpoint value....">
                    <input type="submit" class="btn btn-lg btn-default btn-block" value="Update" />
                </form>
            </div>



        </div>


        <footer>
            <div id="footer_text"></div>
        </footer>


    </div> <!-- Page Content Holder -->
<!--</div>-->

<style>
    .col-centered{
    float: none;
    margin: 0 auto;
}
</style>


<script>
    function openDocument(link){
    $("#doc").load(link);
    }
</script>

<!-- START -- Version text  -->
<script>
	$(document).ready(function(){
	    Version_Text();
	});

	function Version_Text(){
	$.ajax({
		url: "/version",
		method: "GET",
		success: function(data) {
		    $('#version').empty();
		    $('#version').html(data);
		},
		error: function(data) {
			console.log(data);
			$('#version').empty();
		    $('#version').html(data);
		}
	});
};
</script>
<!-- END -- Version text -->

<!-- START -- GET Platform Name  -->
<script>
	$(document).ready(function(){
	   getServerPlatformName();
	});

	function getServerPlatformName(){
	$.ajax({
		url: "/server/platformname",
		method: "GET",
		success: function(data) {
		    $('#server_platformName').empty();
		    $('#server_platformName').html("<p class=\"text-center\"> Platform name: " + data + "</p>");
		},
		error: function(e) {
			$('#server_platformName').empty();
		    $('#server_platformName').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET Platform Name  -->

<!-- START -- GET Serial Number  -->
<script>
	$(document).ready(function(){
	   getServerSerialNumber();
	});

	function getServerSerialNumber(){
	$.ajax({
		url: "/server/serialnumber",
		method: "GET",
		success: function(data) {
		    $('#server_hardwareInfo').append("<p class=\"text-center\"> Serial number: " + data + "</p>");
		},
		error: function(e) {
		    $('#server_hardwareInfo').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET Serial Number  -->


<!-- START -- GET CPU Revision  -->
<script>
	$(document).ready(function(){
	   getServerCPURevision();
	});

	function getServerCPURevision(){
	$.ajax({
		url: "/server/cpurevision",
		method: "GET",
		success: function(data) {
		    $('#server_hardwareInfo').append("<p class=\"text-center\"> CPU Revision: " + data + "</p>");
		},
		error: function(e) {
		    $('#server_hardwareInfo').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET CPU Revision  -->

<!-- START -- GET CPU Architecture  -->
<script>
	$(document).ready(function(){
	   getServerCPUArchitecture();
	});

	function getServerCPUArchitecture(){
	$.ajax({
		url: "/server/cpuarchitecture",
		method: "GET",
		success: function(data) {
		    $('#server_hardwareInfo').append("<p class=\"text-center\"> CPU Architecture: " + data + "</p>");
		},
		error: function(e) {
		    $('#server_hardwareInfo').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET CPU Architecture  -->

<!-- START -- GET CPU Architecture  -->
<script>
	$(document).ready(function(){
	   getServerCPUPart();
	});

	function getServerCPUPart(){
	$.ajax({
		url: "/server/cpupart",
		method: "GET",
		success: function(data) {
		    $('#server_hardwareInfo').append("<p class=\"text-center\"> CPU Part: " + data + "</p>");
		},
		error: function(e) {
		    $('#server_hardwareInfo').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET CPU Architecture  -->

<!-- START -- GET CPU Architecture  -->
<script>
	$(document).ready(function(){
	   getServerCPUVoltage();
	});

	function getServerCPUVoltage(){
	$.ajax({
		url: "/server/cpuvoltage",
		method: "GET",
		success: function(data) {
		    $('#server_hardwareInfo').append("<p class=\"text-center\"> CPU Voltage: " + data + "</p>");
		},
		error: function(e) {
		    $('#server_hardwareInfo').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET CPU Architecture  -->

<!-- START -- GET Server Fan Running  -->
<script>
	$(document).ready(function(){
	   getServerFanRunning();
	   setInterval(getServerFanRunning, 1000);
	});

	function getServerFanRunning(){
	$.ajax({
		url: "/serverFan/output",
		method: "GET",
		success: function(data) {
		    $('#serverFan_running').empty();
		    if(data == "true"){
		    $('#serverFan_running').empty();
		    $('#serverFan_running').html("<img src=\"/image/fan_icon_on.png\" class=\"img-responsive center-block\">");
		    }
		    else{
		    $('#serverFan_running').empty();
		    $('#serverFan_running').html("<img src=\"/image/fan_icon_off.png\" class=\"img-responsive center-block\">");
		    }

		},
		error: function(e) {
			$('#serverFan_running').empty();
		    $('#serverFan_running').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET Server Fan Running  -->

<!-- START -- GET Server CPU Temperature  -->
<script>
	$(document).ready(function(){
	   getServerCPUTemp();
	   setInterval(getServerCPUTemp, 1000);
	});



	function getServerCPUTemp(){
	$.ajax({
		url: "/server/cputemperature",
		method: "GET",
		success: function(data) {
		    $('#serverFan_cpuTemp').empty();
		    $('#serverFan_cpuTemp').html("<h4 class=\"text-center\"> CPU temperature: " + data + " °C</h4>");
		    $('#serverFan_cpuTempInfo').empty();
		    $('#serverFan_cpuTempInfo').html("<p class=\"text-center\"> CPU temperature: " + data + " °C</p>");
		},
		error: function(e) {
			$('#serverFan_cpuTemp').empty();
		    $('#serverFan_cpuTemp').html(e.responseText);
		}
	});
};
</script>
<!-- END -- GET Server CPU Temperature -->

<!-- START -- GET ServerFan setpoint  -->
<script>
	$(document).ready(function(){
	   getServerFanSetpoint();
	});

	function getServerFanSetpoint(){
	$.ajax({
		url: "/serverFan/setpoint",
		method: "GET",
		success: function(data) {
		    $('#serverFan_setpoint').empty();
		    $('#serverFan_setpoint').html("<h4 class=\"text-center\"> Setpoint: " + data + " °C</h4>");
		},
		error: function(data) {
			console.log(data);
			$('#serverFan_setpoint').empty();
		    $('#serverFan_setpoint').html(data);
		}
	});
};
</script>
<!-- END -- GET ServerFan setpoint -->

<!-- START -- UPDATE ServerFan setpoint -->
<script>
$( document ).ready(function() {

	// SUBMIT FORM
    $("#serverFan_setpoint_update").submit(function(event) {
		// Prevent the form from submitting via the browser.
		event.preventDefault();
		setServerFanSetpoint();
	});


    function setServerFanSetpoint(){
    	var formData = {
    		setpoint : $("#serverFan_setpoint_update_value").val(),
    	}
    	$.ajax({
			type : "POST",
			contentType : "application/json",
			url : "/serverfan/updateSetpoint",
			data : JSON.stringify(formData),
			success : function(result) {
				$("#serverFan_setpoint_update_text").html(result);
				getServerFanSetpoint();
			},
			error : function(e) {
			console.log(e);
	            $("#serverFan_setpoint_update_text").html(e.responseText);
			}
		});
    }
})
</script>
<!-- END -- UPDATE ServerFan setpoint -->


<script type="text/javascript">
             $(document).ready(function () {
                 $('#sidebarCollapse').on('click', function () {
                     $('#sidebar').toggleClass('active');
                     $(this).toggleClass('active');
                 });
             });
         </script>
</body>
</html>
